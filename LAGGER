local Players = game:GetService("Players")
local ReplicatedStorage = game:GetService("ReplicatedStorage")
local player = Players.LocalPlayer
local playerGui = player:WaitForChild("PlayerGui")
local backpack = player:WaitForChild("Backpack")

-- UI Configuration - Dey Crasher Design (smaller)
local FRAME_SIZE = UDim2.new(0, 180, 0, 100)
local BUTTON_SIZE = UDim2.new(0, 150, 0, 40)
local POSITION = UDim2.new(1, -190, 0, 30)

-- Create ScreenGui
local screenGui = Instance.new("ScreenGui")
screenGui.Name = "DeyCrasherPanel"
screenGui.DisplayOrder = 10
screenGui.ResetOnSpawn = false
screenGui.IgnoreGuiInset = true
screenGui.Parent = playerGui

-- Main Frame
local mainFrame = Instance.new("Frame")
mainFrame.Name = "DeyCrasher"
mainFrame.Size = FRAME_SIZE
mainFrame.Position = POSITION
mainFrame.BackgroundColor3 = Color3.fromRGB(15, 15, 20)
mainFrame.BackgroundTransparency = 0.1
mainFrame.BorderSizePixel = 0

local corner = Instance.new("UICorner")
corner.CornerRadius = UDim.new(0, 10)
corner.Parent = mainFrame

local stroke = Instance.new("UIStroke")
stroke.Color = Color3.fromRGB(0, 150, 255)
stroke.Thickness = 2
stroke.Transparency = 0.3
stroke.Parent = mainFrame

-- Gradient for cyber effect
local gradient = Instance.new("UIGradient")
gradient.Color = ColorSequence.new({
    ColorSequenceKeypoint.new(0, Color3.fromRGB(25, 25, 35)),
    ColorSequenceKeypoint.new(0.5, Color3.fromRGB(20, 20, 30)),
    ColorSequenceKeypoint.new(1, Color3.fromRGB(15, 15, 25))
})
gradient.Rotation = 90
gradient.Parent = mainFrame

mainFrame.Active = true
mainFrame.Draggable = true
mainFrame.Parent = screenGui

-- Title Label (smaller/thinner)
local titleLabel = Instance.new("TextLabel")
titleLabel.Name = "Title"
titleLabel.Size = UDim2.new(1, 0, 0, 24)
titleLabel.Position = UDim2.new(0, 0, 0, 0)
titleLabel.BackgroundTransparency = 1
titleLabel.Text = "DEY CRASHER"
titleLabel.TextColor3 = Color3.fromRGB(0, 200, 255)
titleLabel.TextSize = 14
titleLabel.Font = Enum.Font.GothamBold
titleLabel.TextXAlignment = Enum.TextXAlignment.Center
titleLabel.Parent = mainFrame

-- Execute Button
local activateButton = Instance.new("TextButton")
activateButton.Name = "Execute"
activateButton.Size = BUTTON_SIZE
activateButton.Position = UDim2.new(0.5, -75, 0.5, -20)
activateButton.BackgroundColor3 = Color3.fromRGB(0, 100, 200)
activateButton.BorderSizePixel = 0
activateButton.Text = "ACTIVATE"
activateButton.TextColor3 = Color3.fromRGB(255, 255, 255)
activateButton.TextSize = 15
activateButton.Font = Enum.Font.GothamBold
activateButton.AutoButtonColor = false

local buttonCorner = Instance.new("UICorner")
buttonCorner.CornerRadius = UDim.new(0, 8)
buttonCorner.Parent = activateButton

-- Button gradient
local buttonGradient = Instance.new("UIGradient")
buttonGradient.Color = ColorSequence.new({
    ColorSequenceKeypoint.new(0, Color3.fromRGB(0, 120, 220)),
    ColorSequenceKeypoint.new(1, Color3.fromRGB(0, 80, 180))
})
buttonGradient.Rotation = 90
buttonGradient.Parent = activateButton

-- Button stroke
local buttonStroke = Instance.new("UIStroke")
buttonStroke.Color = Color3.fromRGB(0, 180, 255)
buttonStroke.Thickness = 1.5
buttonStroke.Parent = activateButton

activateButton.Parent = mainFrame

-- Discord Link (more visible)
local discordLabel = Instance.new("TextLabel")
discordLabel.Name = "DiscordLink"
discordLabel.Size = UDim2.new(1, -10, 0, 18)
discordLabel.Position = UDim2.new(0, 5, 1, 5)
discordLabel.BackgroundTransparency = 1
discordLabel.Text = "discord.gg/gtC5MepQkb"
discordLabel.TextColor3 = Color3.fromRGB(100, 150, 255)
discordLabel.TextSize = 12
discordLabel.Font = Enum.Font.Gotham
discordLabel.TextXAlignment = Enum.TextXAlignment.Center
discordLabel.Parent = mainFrame

local isActive = false
local currentCharacter = nil

-- Function to send chat message
local function sendChatMessage(message)
    local chatService = game:GetService("Chat")
    
    pcall(function()
        chatService:Chat(currentCharacter.Head, message)
    end)
    
    pcall(function()
        local defaultChatSystemChatEvents = ReplicatedStorage:FindFirstChild("DefaultChatSystemChatEvents")
        if defaultChatSystemChatEvents then
            local sayMessageRequest = defaultChatSystemChatEvents:FindFirstChild("SayMessageRequest")
            if sayMessageRequest then
                sayMessageRequest:FireServer(message, "All")
            end
        end
    end)
end

-- Button hover effects
activateButton.MouseEnter:Connect(function()
    if not isActive then
        activateButton.BackgroundColor3 = Color3.fromRGB(0, 130, 230)
    end
end)

activateButton.MouseLeave:Connect(function()
    if not isActive then
        activateButton.BackgroundColor3 = Color3.fromRGB(0, 100, 200)
    end
end)

activateButton.MouseButton1Down:Connect(function()
    activateButton.Position = UDim2.new(0.5, -75, 0.5, -19)
end)

activateButton.MouseButton1Up:Connect(function()
    activateButton.Position = UDim2.new(0.5, -75, 0.5, -20)
end)

local function findSlapTools()
    local slapTools = {}
    
    for _, tool in pairs(backpack:GetChildren()) do
        if tool:IsA("Tool") and (string.find(string.lower(tool.Name), "slap") or string.find(string.lower(tool.Name), "hand") or string.find(string.lower(tool.Name), "glove")) then
            table.insert(slapTools, tool)
        end
    end
    
    if currentCharacter then
        for _, tool in pairs(currentCharacter:GetChildren()) do
            if tool:IsA("Tool") and (string.find(string.lower(tool.Name), "slap") or string.find(string.lower(tool.Name), "hand") or string.find(string.lower(tool.Name), "glove")) then
                table.insert(slapTools, tool)
            end
        end
    end
    
    return slapTools
end

local function equipAllSlapTools(slapTools)
    if not currentCharacter then return false end
    
    local humanoid = currentCharacter:FindFirstChild("Humanoid")
    if humanoid then
        humanoid:UnequipTools()
        task.wait(0.1)
    end
    
    for _, tool in pairs(slapTools) do
        tool.Parent = currentCharacter
    end
    
    return true
end

local function useAllSlapTools(slapTools)
    if not currentCharacter then return end
    
    for i = 1, 10 do
        for _, tool in pairs(slapTools) do
            if tool.Parent == currentCharacter then
                pcall(function()
                    for _, child in pairs(tool:GetChildren()) do
                        if child:IsA("RemoteEvent") then
                            if child.Name == "Activate" or child.Name == "Slap" or 
                               child.Name == "Attack" or child.Name == "Hit" then
                                child:FireServer()
                            end
                        end
                    end
                    
                    for _, part in pairs(tool:GetDescendants()) do
                        if part:IsA("ClickDetector") then
                            fireclickdetector(part)
                        end
                    end
                    
                    if tool:FindFirstChild("Activate") then
                        tool.Activate:Fire()
                    end
                end)
            end
        end
        task.wait(0.05)
    end
end

-- Main function with crash sequence
local function executeAll()
    if isActive then return end
    isActive = true
    
    -- Step 1: Start sequence
    activateButton.Text = "CRASHING..."
    activateButton.BackgroundColor3 = Color3.fromRGB(255, 100, 0)
    
    local slapTools = findSlapTools()
    
    if #slapTools == 0 then
        activateButton.Text = "NO TOOLS"
        task.wait(1)
        activateButton.Text = "ACTIVATE"
        activateButton.BackgroundColor3 = Color3.fromRGB(0, 100, 200)
        isActive = false
        return
    end
    
    -- Step 2: Equipping
    task.wait(0.5)
    activateButton.Text = "CRASHING.."
    
    equipAllSlapTools(slapTools)
    task.wait(0.3)
    
    -- Step 3: Using tools
    activateButton.Text = "CRASHING."
    useAllSlapTools(slapTools)
    task.wait(0.3)
    
    -- Step 4: Final
    activateButton.Text = "CRASHED"
    activateButton.BackgroundColor3 = Color3.fromRGB(255, 50, 50)
    task.wait(0.5)
    
    -- Reset button
    activateButton.Text = "ACTIVATE"
    activateButton.BackgroundColor3 = Color3.fromRGB(0, 100, 200)
    isActive = false
end

-- Connect button click
activateButton.MouseButton1Click:Connect(executeAll)

-- Set up character reference
if player.Character then
    currentCharacter = player.Character
end

player.CharacterAdded:Connect(function(char)
    currentCharacter = char
end)

-- Input handling (Insert key)
local UserInputService = game:GetService("UserInputService")
UserInputService.InputBegan:Connect(function(input, gameProcessed)
    if not gameProcessed and input.KeyCode == Enum.KeyCode.Insert then
        executeAll()
    end
end)

-- Right-click to hide/show
mainFrame.InputBegan:Connect(function(input)
    if input.UserInputType == Enum.UserInputType.MouseButton2 then
        mainFrame.Visible = not mainFrame.Visible
        discordLabel.Visible = mainFrame.Visible
    end
end)

-- Auto-hide on spawn
player.CharacterAdded:Connect(function()
    task.wait(1)
    mainFrame.Visible = true
    discordLabel.Visible = true
end)

print("=== DEY CRASHER Loaded ===")
print("Click ACTIVATE button or press Insert key")
